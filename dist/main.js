(()=>{const e=e=>({title:e,ToDos:[]}),t=(e,t,o,c)=>({title:e,description:t,dueDate:o,priority:c}),o=(()=>{let r=[];const s=e("Default Project");let n=t("pepe","pepedescripcion","pepefecha","pepeprioridad"),l=t("pepa","pepadescripcion","pepafecha","pepaprioridad"),a=t("pupu","pupudescripcion","pupufecha","pupuprioridad");const d=e("Otro projecto");return r.push(d),r.push(s),d.ToDos.push(a),s.ToDos.push(n),s.ToDos.push(l),{projects:r,loadProjects:()=>{let e=JSON.parse(localStorage.getItem("projects"));o.projects=null===e?[]:e},saveProjects:()=>{localStorage.setItem("projects",JSON.stringify(o.projects))},createTask:()=>{const e=document.querySelector(".newTaskTitle"),r=document.querySelector(".newTaskDescription"),s=document.querySelector(".newTaskFecha"),n=document.querySelector(".newTaskPriority"),l=e.value,a=r.value,d=s.value,i=n.value,p=t(l,a,d,i),u=document.querySelectorAll(".proyectosAgregados");for(let e=0;e<u.length;e++)if(u[e].textContent===c.currentProject.currentProject.textContent)for(let t=0;t<o.projects.length;t++)u[e].textContent===o.projects[t].title+"X"&&(o.projects[t].ToDos.push(p),u[e].click(),document.querySelector("#agregarTareas").addEventListener("click",c.crearTaskDisplay))},createProject:()=>{const t=document.querySelector(".newProjectTitleSpace").value;if(o.projects.some((e=>e.title===t)))alert("Elegi otro nombre kpo");else if(""===t)alert("nombres en blanco no kpo");else if(t.length>=15)alert("no mas de 15 caracteres");else{const r=e(t);o.projects.push(r),c.displayProjects(),c.displayToDos(),document.querySelector("#crearProyecto").addEventListener("click",c.crearProyectoDisplay)}}}})(),c=(()=>{const e=document.querySelector("#projects");let t={currentProject:0};const r=()=>{const t=document.querySelector(".newTaskCancel");null!==t&&t.click(),s.removeEventListener("click",r);const n=document.createElement("div");n.classList.add("newProject");const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("placeholder","Titulo nueva lista"),l.classList.add("newProjectTitleSpace");const a=document.createElement("p");a.textContent="Guardar",a.classList.add("newProjectSave");const d=document.createElement("p");d.textContent="Cancelar",d.classList.add("newProjectCancel"),a.addEventListener("click",(()=>{o.createProject(),o.saveProjects()})),d.addEventListener("click",(()=>{s.addEventListener("click",r),c.displayProjects(),c.displayToDos()})),e.appendChild(n),n.appendChild(l),n.appendChild(a),n.appendChild(d)},s=document.querySelector("#crearProyecto");s.addEventListener("click",r);const n=()=>{if(void 0!==o.projects[0]&&0!==c.currentProject.currentProject){const e=document.querySelector(".newProjectCancel");null!==e&&e.click(),l.removeEventListener("click",n);const t=document.createElement("div");t.classList.add("newTask");const r=document.createElement("input");r.classList.add("newTaskTitle"),r.setAttribute("type","text"),r.setAttribute("placeholder","Titulo");const s=document.createElement("input");s.classList.add("newTaskDescription"),s.setAttribute("type","text"),s.setAttribute("placeholder","Descripcion");const a=document.createElement("input");a.classList.add("newTaskFecha"),a.setAttribute("type","date"),a.setAttribute("placeholder","Fecha"),a.setAttribute("onfocus","(this.type='date')"),a.setAttribute("onblur","(this.type='text')");const d=document.createElement("input");d.classList.add("newTaskPriority"),d.setAttribute("type","text"),d.setAttribute("placeholder","Priority");const i=document.createElement("p");i.textContent="Guardar",i.classList.add("newTaskSave");const p=document.createElement("p");p.textContent="Cancelar",p.classList.add("newTaskCancel"),i.addEventListener("click",(()=>{o.createTask(),o.saveProjects()})),p.addEventListener("click",(()=>{l.addEventListener("click",n);const e=document.querySelectorAll(".proyectosAgregados");for(let t=0;t<e.length;t++)if(e[t].textContent===c.currentProject.currentProject.textContent)for(let c=0;c<o.projects.length;c++)e[t].textContent===o.projects[c].title+"X"&&e[t].click();c.displayProjects(),c.displayToDos()})),tareas.appendChild(t),t.appendChild(r),t.appendChild(s),t.appendChild(a),t.appendChild(d),t.appendChild(i),t.appendChild(p)}},l=document.querySelector("#agregarTareas");l.addEventListener("click",n);const a=()=>{for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<o.projects.length;t++){const c=document.createElement("div");c.textContent=o.projects[t].title,c.classList.add("proyectosAgregados");const r=document.createElement("div");r.classList.add("proyectoAgregadoDelete"),r.textContent="X",r.addEventListener("click",(()=>{delete o.projects[t],o.projects=o.projects.filter((e=>String(e).trim())),o.saveProjects(),a(),d()})),e.appendChild(c),c.appendChild(r)}},d=()=>{const e=document.querySelectorAll(".proyectosAgregados"),c=document.querySelector("#tareas");for(let r=0;r<e.length;r++)e[r].addEventListener("click",(()=>{const s=document.querySelector(".newProjectCancel");null!==s&&s.click(),l.addEventListener("click",n),document.querySelector("#agregarTareas").style.cssText="visibility: visible";for(let t=0;t<e.length;t++)e[t].style.background="rgb(56, 56, 56)";for(e[r].style.background="rgb(56, 56, 56, 0.5)";c.firstChild;)c.removeChild(c.firstChild);for(let s=0;s<o.projects.length;s++)if(e[r].textContent===o.projects[s].title+"X"){t.currentProject=e[r];for(let t=0;t<o.projects[s].ToDos.length;t++){const n=document.createElement("div");n.classList.add("ToDo");const l=document.createElement("p");l.classList.add("ToDoTitle"),l.textContent=o.projects[s].ToDos[t].title;const a=document.createElement("p");a.classList.add("ToDoInfo"),a.textContent=o.projects[s].ToDos[t].description;const d=document.createElement("p");d.classList.add("ToDoInfo"),d.textContent=o.projects[s].ToDos[t].dueDate;const i=document.createElement("p");i.classList.add("ToDoInfo"),i.textContent=o.projects[s].ToDos[t].priority;const p=document.createElement("div");p.textContent="X",p.classList.add("ToDoDelete"),p.addEventListener("click",(()=>{delete o.projects[s].ToDos[t],o.projects[s].ToDos=o.projects[s].ToDos.filter((e=>null!==e)),o.saveProjects(),e[r].click()})),c.appendChild(n),n.appendChild(l),n.appendChild(a),n.appendChild(d),n.appendChild(i),n.appendChild(p)}}}))};return{displayProjects:a,displayToDos:d,currentProject:t,crearProyectoDisplay:r,crearTaskDisplay:n}})();o.loadProjects(),c.displayProjects(),c.displayToDos()})();